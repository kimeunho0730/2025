import streamlit as st

# 페이지 기본 설정
st.set_page_config(page_title="신경·호르몬 조절 시뮬레이터", page_icon="🧠", layout="centered")

st.title("🧠 신경·호르몬 조절 시뮬레이터")
st.write("생명과학Ⅰ - 항상성과 조절 단원 학습용 웹사이트")
st.divider()

# -------------------------------
# 상황 선택
# -------------------------------
st.subheader("1️⃣ 상황을 선택하세요")
scenario = st.selectbox(
    "상황을 선택해보세요:",
    [
        "🍰 음식을 많이 먹은 후",
        "🏃 운동 직후",
        "❄️ 추운 환경",
        "🔥 더운 환경",
        "💧 물을 많이 마신 후",
        "🧂 짠 음식을 먹은 후"
    ]
)

# -------------------------------
# 그래프 시뮬레이션
# -------------------------------
st.subheader("2️⃣ 몸 속 변화 그래프")

if scenario == "🍰 음식을 많이 먹은 후":
    st.write("**혈당이 올라가면서 인슐린 분비가 증가합니다.**")
    data = {
        "시간": list(range(0, 11)),  # 0~10분
        "혈당 수치": [80, 120, 150, 160, 170, 160, 150, 140, 130, 110, 100],
        "인슐린 분비량": [10, 20, 40, 60, 80, 70, 60, 40, 30, 20, 10],
    }
    st.line_chart(data, x="시간", y=["혈당 수치", "인슐린 분비량"])

elif scenario == "🏃 운동 직후":
    st.write("**혈당이 낮아지면서 글루카곤 분비가 증가합니다.**")
    data = {
        "시간": list(range(0, 11)),
        "혈당 수치": [100, 95, 85, 80, 75, 70, 80, 85, 90, 95, 100],
        "글루카곤 분비량": [10, 20, 30, 50, 70, 90, 80, 60, 40, 20, 10],
    }
    st.line_chart(data, x="시간", y=["혈당 수치", "글루카곤 분비량"])

elif scenario == "❄️ 추운 환경":
    st.write("**체온이 낮아졌다가 신경·호르몬 조절로 정상으로 회복됩니다.**")
    data = {
        "시간": list(range(0, 11)),
        "체온(℃)": [37, 36.5, 36, 35.8, 35.7, 36, 36.5, 36.8, 37, 37, 37],
    }
    st.line_chart(data, x="시간", y=["체온(℃)"])

elif scenario == "🔥 더운 환경":
    st.write("**체온이 높아졌다가 땀 분비와 혈관 확장으로 정상으로 회복됩니다.**")
    data = {
        "시간": list(range(0, 11)),
        "체온(℃)": [37, 37.5, 38, 38.5, 38.8, 38.5, 38, 37.5, 37, 37, 37],
        "땀 분비량": [10, 20, 40, 60, 80, 90, 80, 60, 40, 20, 10],
    }
    st.line_chart(data, x="시간", y=["체온(℃)", "땀 분비량"])

elif scenario == "💧 물을 많이 마신 후":
    st.write("**삼투압이 낮아졌다가 조절로 정상으로 회복됩니다.**")
    data = {
        "시간": list(range(0, 11)),
        "삼투압": [300, 290, 280, 270, 265, 270, 280, 290, 295, 300, 300],
        "ADH 분비량": [50, 40, 30, 20, 10, 15, 20, 30, 40, 50, 50],
    }
    st.line_chart(data, x="시간", y=["삼투압", "ADH 분비량"])

elif scenario == "🧂 짠 음식을 먹은 후":
    st.write("**삼투압이 높아졌다가 ADH 분비 증가로 조절됩니다.**")
    data = {
        "시간": list(range(0, 11)),
        "삼투압": [300, 310, 320, 330, 335, 330, 320, 310, 305, 300, 300],
        "ADH 분비량": [10, 20, 40, 60, 80, 90, 80, 70, 50, 30, 20],
    }
    st.line_chart(data, x="시간", y=["삼투압", "ADH 분비량"])

st.divider()

# -------------------------------
# 퀴즈
# -------------------------------
st.subheader("3️⃣ 개념 확인 퀴즈")

quiz_q = st.radio(
    "혈당이 낮아졌을 때 분비되는 호르몬은?",
    ["인슐린", "글루카곤", "ADH", "에피네프린"]
)

if quiz_q:
    if quiz_q == "글루카곤":
        st.success("✅ 정답! 혈당이 낮을 때 글루카곤이 분비됩니다.")
    else:
        st.error("❌ 다시 생각해보세요. 혈당이 낮을 때는 글루카곤이 필요합니다.")
